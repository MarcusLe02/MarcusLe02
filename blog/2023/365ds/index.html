<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> a post with code | You R. Name </title> <meta name="author" content="You R. Name"> <meta name="description" content="Platform Engagement Dashboard for 365 Data Science"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://marcusle02.github.io/blog/2023/365ds/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?bf50d6d9dd867d3e0f3b0add94449649"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">You </span> R.  Name </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/people/">people </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/blog/">blog</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">a post with code</h1> <p class="post-meta"> June 29, 2023 </p> <p class="post-tags"> <a href="/blog/2023"> <i class="fa-solid fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/formatting"> <i class="fa-solid fa-hashtag fa-sm"></i> formatting</a>   <a href="/blog/tag/code"> <i class="fa-solid fa-hashtag fa-sm"></i> code</a>     ·   <a href="/blog/category/sample-posts"> <i class="fa-solid fa-tag fa-sm"></i> sample-posts</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>When seeking entry-level data science jobs, having a strong portfolio is essential, and a project can be the essence of that portfolio. By working on a real-life project from the beginning, you can showcase various data-related skills to potential employers. One excellent project brief to consider is The 365 Learning Data Challenge, which allows you to test your creative and analytical thinking by exploring user engagement in e-Learning platforms. Moreover, the required data is already available, making it easier to get started.</p> <p>This blog post will present my final project deliverable and walk you through the various steps involved in its creation, such as querying data, visualization, and incorporating elements of storytelling.</p> <h3>Final Deliverable</h3> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/9-480.webp 480w,/assets/img/9-800.webp 800w,/assets/img/9-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/9.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Tableau Dashboard tracking User Engagement of 365 Data Science from 1 Jan to 20 Oct – <a href="https://public.tableau.com/app/profile/marcus.le1600/viz/365DS_16761251940980/PlatformEngagementDashboard" target="_blank" rel="external nofollow noopener">Link</a> </div> <h3>1. Upload data to BigQuery</h3> <p>After downloading the data files, you can manipulate data locally using Python or Excel. I, however, recommend using a cloud-based storage service (I use BigQuery Free Plan), then using local SQL statements to retrieve the wanted data that would be used in the dashboard.</p> <p>In BigQuery, we’ll start by creating a dataset, then uploading each CSV file in the dataset. Remember to take a look at the schema for each table, partition and cluster them accordingly.</p> <h3>Final Deliverable</h3> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/9-480.webp 480w,/assets/img/9-800.webp 800w,/assets/img/9-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/9.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">The dataset for the project</div> <p>We can try writing some DML SQL statements in the Query Editor to get the feel of the dataset, since we will mostly use SQL in the next step.</p> <h3>2. Query &amp; Manipulate data using Pandas &amp; SQL</h3> <p>In order to retrieve the data locally, we have to enable BigQuery API, install BigQuery Client Library, and make an API call to run a query using the following Python codes:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">google.cloud</span> <span class="kn">import</span> <span class="n">bigquery</span>
<span class="kn">import</span> <span class="n">os</span>

<span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="sh">"</span><span class="s">GOOGLE_APPLICATION_CREDENTIALS</span><span class="sh">"</span><span class="p">]</span> <span class="o">=</span> <span class="sh">'</span><span class="s">./service-account.json</span><span class="sh">'</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">bigquery</span><span class="p">.</span><span class="nc">Client</span><span class="p">()</span>

<span class="n">student_watch_time</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">
SELECT S.student_id,
 L.minutes_watched,
 L.date_watched
FROM `database-376007.365_database.365_student_info` S
JOIN `database-376007.365_database.365_student_learning` L
ON S.student_id = L.student_id
</span><span class="sh">"""</span>

<span class="n">swt_df</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">query</span><span class="p">(</span><span class="n">student_watch_time</span><span class="p">).</span><span class="nf">to_dataframe</span><span class="p">()</span>
</code></pre></div></div> <p>Avoid delving too deeply into specific insights at this stage. Instead, focus on constructing queries that have the potential to have interesting and informative results. Take a closer look at the significance of the outcomes and investigate any related tables that might cause or result from them.</p> <p>To assist you in this process, below are some of the queries that I use as the final CSV files to connect to Tableau. Note that you can use more simple queries and then use Pandas to manipulate data.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">monthly_active_users_count</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">
SELECT COUNT(DISTINCT student_id), EXTRACT (MONTH FROM date_engaged) M
FROM `database-376007.365_database.365_student_engagement` 
GROUP BY M
ORDER BY M
</span><span class="sh">"""</span>

<span class="n">top_5_rated_courses</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">
SELECT CI.course_title, AVG(CR.course_rating) AS avg_rating, COUNT(DISTINCT CR.student_id) AS num_ratings,  SUM(SL.minutes_watched)/COUNT(DISTINCT CR.student_id) AS total_watched_time, COUNT(DISTINCT SL.student_id) AS num_watches
FROM `database-376007.365_database.365_course_info` CI
LEFT JOIN `database-376007.365_database.365_course_ratings` CR ON CI.course_id = CR.course_id
LEFT JOIN (
  SELECT course_id, student_id, SUM(minutes_watched) AS minutes_watched
  FROM `database-376007.365_database.365_student_learning`
  GROUP BY course_id, student_id
) SL ON CI.course_id = SL.course_id
GROUP BY CI.course_id, CI.course_title
ORDER BY AVG(CR.course_rating) DESC
LIMIT 5;
</span><span class="sh">"""</span>

<span class="n">students_master</span> <span class="o">=</span> <span class="sh">"""</span><span class="s">
SELECT 
  S.student_id,
  S.student_country,
  S.date_registered, 
  CASE WHEN EXISTS (SELECT 1 FROM `database-376007.365_database.365_student_purchases` WHERE student_id = S.student_id) THEN </span><span class="sh">'</span><span class="s">YES</span><span class="sh">'</span><span class="s"> ELSE </span><span class="sh">'</span><span class="s">NO</span><span class="sh">'</span><span class="s"> END AS has_purchased,
  CASE WHEN EXISTS (SELECT 1 FROM `database-376007.365_database.365_student_engagement` WHERE student_id = S.student_id) THEN </span><span class="sh">'</span><span class="s">YES</span><span class="sh">'</span><span class="s"> ELSE </span><span class="sh">'</span><span class="s">NO</span><span class="sh">'</span><span class="s"> END AS has_onboarded,
FROM 
  `database-376007.365_database.365_student_info` S
</span><span class="sh">"""</span>
</code></pre></div></div> <h3>3. Store CSV files &amp; connect to Tableau</h3> <p>Remember to transform each query into the dataframe and export them into CSV files:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">swt_df</span> <span class="o">=</span> <span class="n">client</span><span class="p">.</span><span class="nf">query</span><span class="p">(</span><span class="n">student_watch_time</span><span class="p">).</span><span class="nf">to_dataframe</span><span class="p">()</span>
<span class="n">swt_csv</span> <span class="o">=</span> <span class="n">swt_df</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">student_watch_time.csv</span><span class="sh">'</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div> <p>It is now time to connect the files to Tableau. There are two options: you can either connect the local files directly to Tableau, or push the files to Google Drive via the Google Drive API and then connect them to Tableau. The following example code is for the latter option:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">upload_files</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">top_5_rated_courses.csv</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">top_5_watched_courses.csv</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">students_master.csv</span><span class="sh">'</span><span class="p">,</span>
<span class="sh">'</span><span class="s">student_watch_time.csv</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">daily_active_users.csv</span><span class="sh">'</span><span class="p">]</span>

<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">upload_files</span><span class="p">:</span>
  <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="sh">"</span><span class="s">Authorization</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">Bearer ###your-access-token###</span><span class="sh">"</span>
  <span class="p">}</span>
  <span class="n">para</span> <span class="o">=</span> <span class="p">{</span>
      <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span><span class="nb">file</span><span class="p">,</span>
      <span class="sh">"</span><span class="s">parents</span><span class="sh">"</span><span class="p">:[</span><span class="sh">"</span><span class="s">###permalink-to-directory-folder###</span><span class="sh">"</span><span class="p">]</span>
  <span class="p">}</span>
  <span class="n">files</span> <span class="o">=</span> <span class="p">{</span>
      <span class="sh">'</span><span class="s">data</span><span class="sh">'</span><span class="p">:(</span><span class="sh">'</span><span class="s">metadata</span><span class="sh">'</span><span class="p">,</span><span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">(</span><span class="n">para</span><span class="p">),</span><span class="sh">'</span><span class="s">application/json;charset=UTF-8</span><span class="sh">'</span><span class="p">),</span>
      <span class="sh">'</span><span class="s">file</span><span class="sh">'</span><span class="p">:</span><span class="nf">open</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">./</span><span class="si">{</span><span class="nb">file</span><span class="si">}</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">rb</span><span class="sh">'</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="sh">"</span><span class="s">https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart</span><span class="sh">"</span><span class="p">,</span>
      <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
      <span class="n">files</span><span class="o">=</span><span class="n">files</span>
  <span class="p">)</span>
</code></pre></div></div> <p>If you have successfully connected your CSV files to Tableau, you will be able to view it in Data Source tab:</p> <h1 id="image-for-the-tab">Image for the tab</h1> <h3>4. Visualization &amp; Analysis</h3> <p>During the visualization process in Tableau, it’s useful to consider a hypothetical business scenario to determine which visualizations are relevant. In my case, I chose to focus on several key metrics related to high-rating and popular courses, users’ funnels and purchase trends, and active – new users over time.</p> <p>When selecting visualizations, try to keep in mind the principle of less is more. While it’s tempting to include every charts possible to showcase all findings, it’s important to choose the right visualizations without cluttering the dashboard. A clean and concise dashboard will not only be more visually appealing, but it will also be easier for the audience to interpret.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/9-480.webp 480w,/assets/img/9-800.webp 800w,/assets/img/9-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/9.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">Dashboard (without textual insights)</div> <p>The final step is to add insightful text to support each graph. This text should provide context and help viewers understand the key takeaways from the data, making the dashboard more comprehensive and impactful. By taking the time to thoughtfully craft this text, we can effectively communicate insights and even recommend actions based on the data.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/9-480.webp 480w,/assets/img/9-800.webp 800w,/assets/img/9-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/9.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption">Our final dashboard</div> <h3>Other resources</h3> <p>Tutorial for BigQuery API: <a href="https://www.youtube.com/watch?v=lLPdRRy7dfE" target="_blank" rel="external nofollow noopener">YouTube</a></p> <p>Tutorial for Google Drive API: <a href="https://www.youtube.com/watch?v=JwGzHitUVcU" target="_blank" rel="external nofollow noopener">YouTube</a></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/openpyxl/">a post with code</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/address-parsing/">a post with code</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/images/">Reinforcement Learning explained: theory</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/finance1/">An Excel template of Personal Finance for college students (Part 1)</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/finance2/">An Excel template of Personal Finance for college students (Part 2)</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 You R. Name. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?7254ae07fe9cc5f3a10843e1c0817c9c" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>